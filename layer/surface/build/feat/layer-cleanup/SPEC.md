# Layer Cleanup

> Remove obsolete layer directories that shouldn't be public.

**Status:** complete
**Created:** 2026-01-26

---

## Problem

Post-public-launch cleanup. Some layer directories were tracked before gitignore was set up, or contain obsolete content that shouldn't be in the public repo.

## Directories to Remove

### layer/lab/

```
layer/lab/queries.json
```

Old lab automation queries. No longer used.

**Action:** `git rm -r layer/lab/`

### layer/personas/

```
layer/personas/persona-20251029-061054.md
layer/personas/persona-20251106-214532.md
```

Old persona experiment files from Oct/Nov 2025. Superseded by session-based knowledge capture.

**Action:** `git rm -r layer/personas/`

### docker-compose.yml / docker-compose.yml.example

rqlite persistence config from Aug 2025. Replaced with SQLite the next day (`d11cc91`). Zero references in source. Template in `resources/templates/docker/` is unaffected.

**Action:** `git rm docker-compose.yml docker-compose.yml.example`

### Dockerfile

Generic 9-line stub (`FROM rust:latest`, `cargo build`, `cargo run`). Not referenced by any code. Real Dockerfiles generated by `patina yolo` from templates in `resources/templates/docker/`.

**Action:** `git rm Dockerfile`

### tests/ subdirectories (keep .rs files)

Historical test data from Nov 2025 research. The `.rs` integration tests are active (cargo compiles them). The subdirectories are dead artifacts:

- `tests/model-benchmarks/` - Benchmark results comparing 5 embedding models. Selection already made (E5-base-v2). Superseded by `patina bench`.
- `tests/retrieval/` - Baseline quality tests using `patina query semantic` (command no longer exists). Dead harness + findings.
- `tests/smoke-test/` - SQL INSERTs for old `observations` table schema. Dead.
- `tests/topic-2/` - Research findings on session extraction quality. Historical.

**Action:** `git rm -r tests/model-benchmarks/ tests/retrieval/ tests/smoke-test/ tests/topic-2/`

## Already Fixed

- [x] `layer/dust/architecture/` - untracked (was gitignored but tracked)

## Exit Criteria

- [x] `layer/lab/` removed from git
- [x] `layer/personas/` removed from git
- [x] Verify with `git ls-files | grep -E "(lab|personas)"`
- [x] `docker-compose.yml` removed from git
- [x] `docker-compose.yml.example` removed from git
- [x] `Dockerfile` removed from git
- [x] `tests/model-benchmarks/` removed from git
- [x] `tests/retrieval/` removed from git
- [x] `tests/smoke-test/` removed from git
- [x] `tests/topic-2/` removed from git
