---
type: refactor
id: reports-layer
status: complete
created: 2026-01-22
completed: 2026-01-22
sessions:
  origin: 20260122-083510
  work: [20260122-102703]
related:
  - layer/surface/build/refactor/spec-system/SPEC.md
  - layer/surface/build/spec-report.md
---

# refactor: Reports Layer

> PROOF should be on the surface, not buried in tool outputs.

**Problem:** Measurements and learnings are scattered:
- `/eval/` at root (temporal-error-analysis, ref-repo-results)
- `layer/surface/epistemic/eval/` (epistemic queries)
- `layer/surface/reports/` (state reports)
- Bench results go... somewhere?

**Solution:** Unify under `layer/surface/reports/` with clear categories.

**Status:** Complete ✅ (2026-01-22)

---

## Exit Criteria

- [x] All eval content moved to `layer/surface/reports/`
- [x] `epistemic/eval/` moved to `reports/eval/epistemic/`
- [x] Reports structure documented (see below)
- [x] `patina report` outputs to correct location (`reports/state/`)

**Note:** JSON querysets (test fixtures for `patina bench`) moved to `resources/bench/` - they're patina development artifacts, not part of the layer system.

---

## Proposed Structure

```
layer/surface/reports/
├── state/                    # patina report outputs (snapshots)
│   └── 2026-01-08-state.md
├── eval/                     # Evaluation results (PROOF)
│   ├── epistemic/           # Epistemic layer eval
│   │   ├── queries.md       # The 10-query test
│   │   └── results.md       # Completed eval results
│   ├── temporal/            # Temporal query eval
│   │   └── error-analysis.md
│   └── ref-repo/            # Ref repo retrieval eval
│       └── results.md
├── bench/                    # Benchmark results
│   └── retrieval/           # Scry performance
└── retrospectives/           # What we learned (high-level)
    └── 2026-q1-review.md
```

---

## Category Definitions

### state/

**What:** Automated `patina report` outputs. Point-in-time snapshots.

**Naming:** `YYYY-MM-DD-state.md`

**Content:** Lines of code, modules, architecture queries, RAG health.

**Generated by:** `patina report` command

### eval/

**What:** Evaluation results with methodology and scores. PROOF that things work (or don't).

**Structure:** Subdirectories by what's being evaluated.

**Content:**
- Query sets with expected answers
- Baseline vs treatment scores
- Error analysis
- Success criteria and results

**Key property:** Results tables with numbers. Not prose. Measurable.

### bench/

**What:** Performance benchmarks. Timing, throughput, resource usage.

**Structure:** Subdirectories by system being benchmarked.

**Content:**
- Benchmark methodology
- Results tables
- Comparison over time

### retrospectives/

**What:** High-level learnings. What worked, what didn't, what we'd do differently.

**Naming:** `YYYY-QN-topic.md` or `feature-name-retro.md`

**Content:** Human-written synthesis, not automated output.

---

## Migration Plan

### Step 1: Move /eval/ contents

| From | To |
|------|-----|
| `/eval/temporal-error-analysis.md` | `reports/eval/temporal/error-analysis.md` |
| `/eval/ref-repo-results.md` | `reports/eval/ref-repo/results.md` |

### Step 2: Move epistemic/eval/

| From | To |
|------|-----|
| `epistemic/eval/queries.md` | `reports/eval/epistemic/queries.md` |
| `epistemic/eval/results-template.md` | `reports/eval/epistemic/results-template.md` |

### Step 3: Move existing state report

| From | To |
|------|-----|
| `reports/2026-01-08-state.md` | `reports/state/2026-01-08-state.md` |

### Step 4: Update patina report command

Modify output path from `layer/surface/reports/` to `layer/surface/reports/state/`.

### Step 5: Remove /eval/ directory

After migration, delete empty `/eval/` at root.

---

## Frontmatter for Reports

Reports should have frontmatter for searchability:

```yaml
---
type: eval | bench | state | retrospective
id: descriptive-name
created: YYYY-MM-DD
session: YYYYMMDD-HHMMSS (if relevant)
related:
  - specs or features this evaluates
---
```

---

## Status Log

| Date | Status | Note |
|------|--------|------|
| 2026-01-22 | in_progress | Spec created, migration not started |
| 2026-01-22 | complete | Migration verified complete, report command updated |

---

## See Also

- [[spec-report.md]] - Original report command spec
- [[spec-epistemic-layer.md]] - Epistemic eval methodology
