# Project State Report: patina

**Generated:** 2026-01-25T23:49:12.912626+00:00
**By:** patina report v0.1.0

## Summary

| Metric | Value |
|--------|-------|
| Files | 176 |
| Lines of code | 49160 |
| Functions | 1488 |

### Languages

| Language | Files | Lines |
|----------|-------|-------|
| Rust | 176 | 49160 |

## Architecture

*Via scry semantic search*

### Query: "what are the main architectural components"

1. **20251121-065812** (score: 0.87)
   Previous session created the build recipe system (`layer/core/build.md`) with a 5-phase roadmap and 5 detailed spec documents in `layer/surface/` c...

2. **20251120-110914** (score: 0.87)
   Synthesized Patina's multi-project RAG architecture from 5+ design documents and sessions. Established core model: projects are autonomous islands ...

3. **20251210-094521** (score: 0.87)
   Last session ("Build Continues") accomplished a major design pivot: shifted from "source/presentation" model (generate CLAUDE.md, gitignore it) to ...

4. **20251211-103012** (score: 0.87)
   Layered architecture: External tools → Patina CLI → Orchestration scripts → LLM frontend

5. **20251031-065336** (score: 0.86)
   Completed Phase 1 (ONNX Embedding Foundation) with all 6 tasks: downloaded ONNX models from HuggingFace, implemented pure Rust embeddings module wi...

### Query: "how is the codebase organized"

1. **20251001-171455** (score: 0.87)
   Completed all 9 language extractions (Solidity and Cairo). Implemented Phase 2 of reference repository management with batch scraping capabilities ...

2. **20251218-065747** (score: 0.86)
   Completed Pass 1 (Inventory) of code audit - catalogued entire codebase (~28K lines)

3. **20251002-055812** (score: 0.86)
   Completed and merged PR #25 (33 commits) covering all 9 language extractions and Phase 2 batch scraping. Fixed all clippy warnings in extractors an...

4. **20250910-090740** (score: 0.86)
   The previous session completed C/C++ language extraction with full struct field and inheritance support. Successfully extracted 330 struct fields f...

5. **20250823-065307** (score: 0.85)
   **Focused on data for LLM consumption**: Shifted from "what code does" to "how developers code"

### Query: "what are the core abstractions"

1. **20260108-200725** (score: 0.87)
   Deep design exploration of the `layer/surface/` role in patina architecture. Created `spec-surface-layer.md` with grounded requirements after explo...

2. **20251217-095631** (score: 0.87)
   Last session reviewed Apple's CLaRa paper (continuous latent reasoning for RAG) against Patina's Phase 3 feedback loop design. Key validation: CLaR...

3. **20251126-172352** (score: 0.87)
   Last session was a deep exploration session that accomplished two major things: (1) Rewrote the `patina repo` command design to simplify external r...

4. **20251025-081846** (score: 0.87)
   Previous session (review) designed a hybrid neuro-symbolic architecture: Cloud LLM (Claude) writes Prolog inference rules once ($0.50), CoreML extr...

5. **20251101-180301** (score: 0.87)
   Completed database abstraction architecture design and Phase 1 implementation: created `src/db` module following scrape/code pattern with SqliteDat...

## Largest Modules

| Module | Lines | Functions | % of Total |
|--------|-------|-----------|------------|
| ./src/mcp/server.rs | 1540 | 18 | 3.1% |
| ./src/commands/scrape/code/languages/typescript.rs | 1352 | 31 | 2.8% |
| ./src/main.rs | 1159 | 2 | 2.4% |
| ./src/commands/scrape/code/languages/cpp.rs | 1080 | 22 | 2.2% |
| ./src/mother/graph.rs | 1022 | 31 | 2.1% |
| ./src/commands/repo/internal.rs | 989 | 31 | 2.0% |
| ./src/commands/scrape/code/languages/javascript.rs | 860 | 16 | 1.7% |
| ./src/commands/scrape/code/languages/go.rs | 817 | 20 | 1.7% |
| ./src/commands/scrape/code/languages/solidity.rs | 796 | 30 | 1.6% |
| ./src/commands/adapter.rs | 737 | 17 | 1.5% |

## RAG Index Health

| Metric | Value |
|--------|-------|
| Last scrape | fe3a602ad53719aa69da4ed9114a722dca313dda |
| Total events | 53864 |
| Code events | 48284 |
| Git events | 1355 |
| Session events | 4064 |
| Indexed files | 176 |
| Vector indices | semantic, temporal, dependency |

## Tool Performance

| Tool | Metric | Value |
|------|--------|-------|
| scry | Queries run | 3 |
| scry | Empty results | 0 |
| scry | Avg results/query | 5.0 |

---

*Report quality = tool quality. Empty results indicate opportunities to improve patina's understanding.*
