# Session: mothership
**ID**: 20260105-121645
**Started**: 2026-01-05T17:16:45Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20260105-121645-start
**Starting Commit**: 669224441f189a7060e8539e9513632ba999202f

## Previous Session Context
Deep dive session into mothership architecture and Graph RAG concepts. Analyzed all 14 specs in layer/surface/build/, identified gap between vision (Graph RAG with traversal) and reality (dumb federation). Created `spec-mothership-graph.md` (Phase G1-G2) defining SQLite graph.db schema and relationship types (USES, LEARNS_FROM, TESTS_WITH, SIBLING, DOMAIN). Key decisions: SQLite for graph storage (local-first), graph foundation before persona work. User priority clarified: "make patina useful first, then cheap."

## Goals
- [ ] RAG architecture spec + goals for mothership

## Activity Log
### 12:16 - Session Start
Session initialized with goal: mothership
Working on branch: patina
Tagged as: session-20260105-121645-start


### 13:01 - Update (covering since 12:16)

**Git Activity:**
- Commits this session: 4
- Files changed: 10
- Last commit: 42 seconds ago

**Work Completed:**
- Anchored in layer/core values (dependable-rust, unix-philosophy, oxidized-knowledge)
- Reviewed build.md direction and recent git history/sessions
- Applied Andrew Ng critique to spec-mothership-graph.md: "measure first, build second"
- Added Phase G0 (Cross-Project Measurement) before G1
- Created `eval/cross-project-queryset.json` with 12 queries from session-derived usage
- Measured dumb routing baseline: expected repos NOT in top 5 for any test query
- Simulated smart routing: `--repo dojo` dramatically better than `--all-repos`
- Updated spec with baseline results and decision to proceed to G1

**Discussion Context:**
- User asked "what would Andrew Ng think of this spec?" - led to measurement-first revision
- User concern: "not at the loss of building a functioning tool" - validated that G0 is quick (~4h) and leads to G1
- Relationship types marked as "hypothesized (to be validated)" - data-driven, not invented

**Key Decisions:**
1. Phase G0 added before G1 - prove gap exists before building infrastructure
2. Cross-project queryset uses `expected_repos` as ground truth for routing
3. Gap is severe (0/3 expected repos in top 5) → proceed to G1
4. Scalpel commits - 4 focused commits instead of one big one

**Challenges Faced:**
- Uncommitted intent detection code from Phase 0.25b - left in place (orthogonal to G0)
- Most ref repos falling back to lexical search (no semantic index) - noted but not blocking

**Patterns Observed:**
- "Noise drowning signal" - generic FTS5 matches from irrelevant repos rank higher
- Andrew Ng alignment improves spec quality without blocking progress
- Measurement-first reveals real problems (not the problems you imagined)


### 13:03 - Note [patina@3818a705]
Andrew Ng alignment: measure-first applied to spec-mothership-graph.md. Added Phase G0 before G1 - proved dumb routing gap is severe (expected repos not in top 5) which justified building graph infrastructure. Key insight: measurement-first doesn't slow down shipping if the tool is actually needed - it either validates the work or saves you from building unnecessary infrastructure. The data decides.

### 13:09 - Update (covering since 13:01)

**Git Activity:**
- Commits this session: 1 (build.md update)
- Files changed: 10
- Last commit: 8 minutes ago

**Work Completed:**
- Updated build.md to mark G0 complete, current phase G1
- Began G1 setup (explored src/ structure, checked repo/registry code)
- User paused G1 for future session

**Session Wrap-up:**
- Specs verified ready for G1 pickup
- Uncommitted Phase 0.25b code left in place (orthogonal)
- Next session entry point: build.md → spec-mothership-graph.md G1 section


## Session Classification
- Work Type: pattern-work
- Files Changed:        4
- Commits:        4
- Patterns Modified:        3
- Session Tags: session-20260105-121645-start..session-20260105-121645-end
