# Session: claude.md changes
**ID**: 20260118-054352
**Started**: 2026-01-18T10:43:53Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20260118-054352-claude-start
**Starting Commit**: 19fd423817c09a3144bcc82e3ff76ce177edec46

## Previous Session Context
Last session completed E2.5 session-belief feedback loop, adding code to `session-start.sh` that parses archived sessions and displays belief capture counts. Key fix: discovered template caching issue where `~/.patina/adapters/claude/templates/` wasn't refreshed on rebuild. Committed as `19fd4238 feat(epistemic): complete E2.5 session-belief feedback loop`. Next steps identified: E3 Scry Integration to explore how beliefs should be indexed (simple vs rich metadata approach).

## Goals
- [ ] claude.md changes

## Activity Log
### 05:43 - Session Start
Session initialized with goal: claude.md changes
Working on branch: patina
Tagged as: session-20260118-054352-claude-start


### 06:54 - Update (covering since 05:43)

**Git Activity:**
- Commits this session:        0
- Files changed: 2
- Last commit: 9 hours ago

**Work Completed:**
- Investigated CLAUDE.md diff - discovered `bootstrap_content()` in `launch.rs` generates minimal CLAUDE.md that overwrites existing content
- Researched Claude Code configuration system (memory hierarchy, @imports, rules/, skills/, managed paths)
- Researched Gemini CLI configuration (GEMINI.md hierarchy, TOML commands, extensions)
- Researched OpenCode configuration (AGENTS.md, agent/ directory, Claude fallback support)
- Created comprehensive spec: `layer/surface/build/spec-adapter-non-destructive.md`

**Key Decisions:**
- Namespace all Patina content under `patina/` subdirectories - never touch what we don't own
- Claude: `.claude/rules/patina/`, `.claude/commands/patina/`, `.claude/skills/patina-*`
- Gemini: `.gemini/patina/` (no rules/ support), `.gemini/commands/patina/*.toml`
- OpenCode: `.opencode/commands/patina/`, `.opencode/agent/patina-*`
- Bootstrap files (CLAUDE.md, GEMINI.md, AGENTS.md) are user-owned - offer @import section on add, never touch on refresh

**Discussion Context:**
- Started by reviewing diff of CLAUDE.md - found it was being replaced with minimal MCP-focused version
- User raised concern about being disruptive to existing projects
- Explored enterprise patterns: layered config, marker-based sections, include files
- Anchored spec in layer/core values (unix-philosophy, dependable-rust, adapter-pattern)
- Deep dive into skills vs agents comparison - not 1:1, need adapter-specific frontmatter

**Patterns Observed:**
- All three CLIs support @import syntax - universal pattern for file inclusion
- Claude has richest structure (rules/, skills/), Gemini simplest (just GEMINI.md hierarchy)
- OpenCode is Claude-compatible (CLAUDE.md fallback) but uses agent/ instead of skills/
- Skills (Claude) are auto-discovered via description; Agents (OpenCode) require explicit invocation


### 06:59 - Update (covering since 06:54)

**Git Activity:**
- Commits this session:        0
- Files changed: 2
- Last commit: 9 hours ago

**Work Completed:**
- Corrected misunderstanding: Both Claude Code AND OpenCode have skills AND agents as separate concepts
- OpenCode skills follow "Anthropic Agent Skills Specification" and discover `.claude/skills/` as fallback
- Updated spec to reflect correct structure: `.opencode/skills/patina-*` not `.opencode/agent/patina-*`
- Rewrote "Skills vs Agents" section to explain both concepts correctly

**Key Corrections:**
- Skills = reusable knowledge (both tools have this)
- Agents = isolated execution contexts (both tools have this)
- OpenCode is Claude-compatible for skills - our SKILL.md may work unchanged in both


## Beliefs Captured: 0
_No beliefs captured this session_

## Session Classification
- Work Type: exploration
- Files Changed:        0
- Commits:        0
- Patterns Modified:        0
- Beliefs Captured: 0
- Session Tags: session-20260118-054352-claude-start..session-20260118-054352-claude-end
