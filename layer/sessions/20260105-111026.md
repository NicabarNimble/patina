# Session: mothership + ref repo + measure + eval + usefulness DEEP DIVE
**ID**: 20260105-111026
**Started**: 2026-01-05T16:10:26Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20260105-111026-start
**Starting Commit**: e28ba90c71014c4f751bf0b313f8584b1d8d5c91

## Previous Session Context
Last session completed Phase 0.25c: implemented commit→file expansion in LexicalOracle which dramatically improved Recall@10 by +169% (patina: 17.3%→45.7%). Generated querysets and ran baselines for 4 reference repos (patina, dojo, opencode, SDL). Key insight: "follow relationships, don't just match text" - the fix addressed an architectural gap where commits were found but touched files weren't expanded. Session marked 5/6 Phase 0.25c deliverables complete; remaining item is `context topic` semantic search fix (deferred).

## Goals
- [ ] mothership + ref repo + measure + eval + usefulness DEEP DIVE

## Activity Log
### 11:10 - Session Start
Session initialized with goal: mothership + ref repo + measure + eval + usefulness DEEP DIVE
Working on branch: patina
Tagged as: session-20260105-111026-start


### 12:01 - Update (covering since 11:10)

**Git Activity:**
- Commits this session:        0
- Files changed: 13
- Last commit: 58 minutes ago

**Work Completed:**
- Deep dive into all existing specs (14 files in layer/surface/build/)
- Comprehensive analysis of mothership architecture: what exists vs what's missing
- Reviewed RAG best practices from external video + lecture images (Graph RAG concepts)
- Created new `spec-mothership-graph.md` (240 lines) defining Phase G1-G2
- Updated `build.md` to reflect new graph focus and phase structure
- Updated `spec-mothership.md` with Related Specs section

**Discussion Context:**
- User clarified focus: "make patina useful first, then cheap" - defer token efficiency
- Key question: how do projects answer questions using ref repos and other projects?
- Analyzed gap between vision (Graph RAG with traversal) and reality (dumb federation)
- Video insight aligned with our needs: "Graph RAG preserves relationships, traditional RAG is isolated chunks"

**Key Decisions:**
1. **Phase G1-G2 are new priority** - Graph foundation before Phase 0.5 (persona) or 1-3
2. **SQLite for graph.db** - Aligns with local-first, answers Open Question #1
3. **Relationship types defined**: USES, LEARNS_FROM, TESTS_WITH, SIBLING, DOMAIN
4. **Deferred work identified**: retrieval optimization Phase 2-4, github adapter, model runtime

**Challenges Faced:**
- Context constraints required focused synthesis rather than broad exploration
- Existing specs have overlapping concerns - needed to identify what's mothership-specific

**Patterns Observed:**
- spec-mothership.md is comprehensive vision but missing concrete graph schema
- Registry.yaml has domain tags but they're unused for routing
- Federation exists (`--all-repos`) but is "dumb enumeration" not graph traversal
- Key gap: no `graph.db`, no edges, no relationship storage


## Session Classification
- Work Type: exploration
- Files Changed:        0
- Commits:        0
- Patterns Modified:        0
- Session Tags: session-20260105-111026-start..session-20260105-111026-end
