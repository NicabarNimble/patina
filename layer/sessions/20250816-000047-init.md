# . Initialization

Initialized on: 2025-08-16T00:00:47.462642+00:00
LLM: claude
Dev Environment: dagger

## Design Source
[project]
name = "patina"
type = "system"
purpose = "Help build systems with LLMs by maintaining context and decomposing into tools"

[why]
problem = "Constantly re-teaching AI assistants about project context, patterns, and constraints"
solution = "Persistent, composable context system that accumulates wisdom over time"
users = "Developers working with AI assistants on complex projects"
value = "Eliminate context friction, maintain consistency, compound knowledge"

[how]
patterns = [
    "Unix philosophy: one tool, one job",
    "Pattern-selection-framework: Tools not Systems",
    "LLM-agnostic design with adapter pattern",
    "Git as memory system for LLM development",
    "Dependable Rust: black-box module boundaries"
]
architecture = "Core CLI + Layer System + Modular Workspace + Adapters"
core_abstractions = [
    "Context orchestration",
    "Pattern storage/retrieval with Git awareness", 
    "Knowledge evolution (Core → Surface → Dust)",
    "Adapter traits for LLM/environment independence",
    "Session capture and distillation",
    "Git memory tracking (survival metrics)"
]

[what]
core_features = [
    "Layer system for pattern evolution (Core → Surface → Dust)",
    "Git memory commands for work tracking and survival metrics",
    "Session capture with distillation to layer/sessions/",
    "Modular workspace architecture (environment-registry, etc)",
    "Multiple LLM adapters (Claude with git/session commands, Gemini)",
    "SQLite-based pattern indexing with Git awareness",
    "Navigate command with pattern search and confidence scoring",
    "Agent command for modular workspace management"
]
implemented_features = [
    "Git integration for code survival tracking",
    "Pattern-selection-framework for architecture decisions",
    "Dependable Rust pattern across codebase",
    "Session and Git memory commands in Claude adapter",
    "Modular workspace decomposition into tool-sized pieces",
    "SQLite indexing with navigation command"
]
future_features = [
    "Pattern success metrics based on survival time",
    "Automatic pattern extraction from surviving code",
    "Cross-project pattern discovery",
    "Vector storage for semantic pattern search",
    "Failed experiment preservation and learning"
]
non_goals = [
    "Being an IDE or editor",
    "Managing source code directly",
    "Replacing human judgment"
]

[technical]
language = "rust"
min_rust_version = "1.75"
dependencies = [
    "clap - CLI parsing",
    "anyhow - error handling",
    "serde - serialization", 
    "toml - configuration",
    "rusqlite - embedded SQLite for pattern indexing",
    "rayon - parallel processing (better than async for our use)",
    "reqwest - HTTP client (blocking only)",
    "notify - file watching",
    "which - tool detection",
    "chrono - time handling",
    "uuid - unique identifiers",
    "dirs - system directories",
    "colored - terminal output"
]
constraints = [
    "Core CLI in Rust, modular workspace in Go",
    "No tokio/async - use rayon for parallelism",
    "Adapter pattern for LLM/environment independence",
    "Zero network calls without consent",
    "Comprehensive test coverage for all Go modules",
    "Clear boundaries between Rust CLI and Go modules",
    "Git commands via shell (no git2 dependency)"
]
deployment = "Single binary distributed via cargo install"

[development]
[development.environment]
required_tools = ["rust", "cargo", "git"]
recommended_tools = ["docker", "go", "dagger", "claude"]
setup_instructions = """
1. Install Rust via rustup
2. Clone repository
3. cargo build --release
4. Optional: Install Go and Dagger for enhanced builds
"""

[development.commands]
test = "cargo test --workspace"
lint = "cargo clippy --workspace -- -D warnings"
format = "cargo fmt --all"
build = "cargo build --release"
run = "cargo run --"
check = "cargo check --workspace"

[development.conventions]
code_style = """
- Use rustfmt defaults
- Apply Dependable Rust pattern (mod.rs ≤150 lines)
- Document public APIs with examples
- Error messages guide users
"""
architecture = """
- Core CLI with black-box module boundaries
- Modular workspace system (Tools not Systems)
- Traits define adapter interfaces
- Layer system for pattern evolution
- Git as memory system, not workflow enforcement
"""
patterns = """
- Pattern-selection-framework guides architecture decisions
- Git memory commands for work tracking
- Session distillation to layer/sessions/
- Information over automation
- Escape hatches everywhere
"""

[status]
version = "0.1.0"
stability = "experimental"
active_development = [
    "Git memory integration",
    "Modular workspace architecture",
    "Pattern survival tracking"
]
proven_components = [
    "Claude adapter with session/git commands",
    "SQLite indexing with navigation",
    "Layer system (Core/Surface/Dust)",
    "Dependable Rust module structure"
]
experimental = [
    "Modular workspace decomposition",
    "Pattern survival metrics",
    "Git-based confidence scoring"
]
