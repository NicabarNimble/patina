# Session: Review New Phases
**ID**: 20251209-075138
**Started**: 2025-12-09T12:51:38Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20251209-075138-start
**Starting Commit**: 0d6e6574f6187b34e2ed724f4f77aad033f79ee1

## Previous Session Context
Last session (20251208-202317) completed Phase 4d (Persona scry integration), adding persona results to `patina scry` queries with `[PERSONA]` tags and `--no-persona` flag. With all Phase 4 tasks complete, the session restructured Phases 5-8: Phase 5 creates adapter-agnostic `patina context` command with multiple output formats, Phase 6 wires native CLIs (Claude Code, Gemini CLI, Codex), Phase 7 automates sessionâ†’persona capture, and Phase 8 adds Model Worlds (MLX, code models). Uncommitted changes remain from that session.

## Goals
- [x] Review New Phases
- [x] Design launcher architecture (`patina` as entry point)
- [x] Define adapter system (winamp skins model)
- [x] Integrate MCP into mothership
- [x] Document in spec-launcher-architecture.md
- [x] Update build.md phases 5-6

## Activity Log
### 07:51 - Session Start
Session initialized with goal: Review New Phases
Working on branch: patina
Tagged as: session-20251209-075138-start

### 08:15 - Launcher Architecture Design

**Key Design Decisions:**

1. **`patina` as launcher** (like `code .` for VS Code)
   - `patina` = open project in default frontend
   - `patina claude` = open in Claude Code
   - `patina gemini` = open in Gemini CLI
   - `patina --yolo gemini` = launch in YOLO container

2. **Adapters = Winamp skins**
   - Same content (`layer/rules/`), different format
   - Switch instantly, no migration needed
   - Bootstrap files are tiny ("use MCP")

3. **`patina serve` = Mothership (HTTP + MCP)**
   - Single process, two interfaces
   - HTTP for containers/scripts
   - MCP for LLM frontends
   - Auto-starts when `patina claude` runs

4. **First-run creates workspace**
   - `~/.patina/` global config
   - `~/Projects/Patina` workspace folder
   - Adapters installed to `~/.patina/adapters/`

5. **layer/rules/ = source of truth**
   - `context.md`, `patterns.md`, `tools.md`
   - Adapters render from rules
   - MCP serves rules dynamically

**Files Created:**
- `layer/surface/build/spec-launcher-architecture.md` - full spec

**Files Updated:**
- `layer/core/build.md` - restructured phases 5-6


### 09:18 - Update (covering since 07:51)

**Git Activity:**
- Commits this session: 2
- Last commit: docs(design): add launcher architecture for Phase 5-6

**Work Completed:**
- Reviewed existing Phase 5-6 structure in build.md
- Iterative design discussion exploring:
  - Workspace folder creation (`~/Projects/Patina`)
  - Global vs project-specific LLM adapter choice
  - MCP as universal interface vs adapter-specific scaffolding
- Created comprehensive spec: `spec-launcher-architecture.md` (783 lines)
- Restructured build.md phases 5-6 with new validation criteria
- Committed previous session's Phase 4d code (persona scry integration)

**Key Decisions:**
1. `patina` becomes the launcher (like `code .`) - no more running `claude` directly
2. Adapters are "winamp skins" - same rules, different rendering, instant switch
3. MCP is the universal interface - bootstrap files just say "use MCP"
4. `patina serve` = HTTP + MCP in one process (mothership)
5. `layer/rules/` is source of truth - adapters render from it

**Patterns Observed:**
- Design emerged through iterative refinement - initial ideas got cleaner with each pass
- "Wrong frontend" problem led to MCP-as-universal insight
- "Winamp skin" metaphor clarified the adapter model perfectly
- Separating "install" (global workspace) from "init" (project setup) was key distinction


## Session Classification
- Work Type: pattern-work
- Files Changed:       10
- Commits:        2
- Patterns Modified:        5
- Session Tags: session-20251209-075138-start..session-20251209-075138-end
