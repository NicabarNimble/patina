# Session: mothership
**ID**: 20260102-071003
**Started**: 2026-01-02T12:10:03Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20260102-071003-start
**Starting Commit**: c0b0833db9fa78f2f1a99ee7e89cf0f318ff3083

## Previous Session Context
Completed Phase 0 Git Narrative with all 6 deliverables: commits_fts table (FTS5 on commit messages), scrape integration, LexicalOracle searching commits alongside code, moments table schema, assay derive-moments CLI command, and verified exit criteria. Tested on dojo repo with 2702 commits indexed and 380 moments detected. The overarching A/B test design remains: (A) ref repos with git-only narrative vs (B) patina with git + sessions to measure what sessions actually add beyond git history.

## Goals
- [x] Review Phase 0 Git Narrative and identify measurement gaps
- [x] Add Phase 0.25 to spec-mothership.md (measurement before A/B)
- [x] Create temporal queryset derived from real sessions
- [x] Design learned moments approach (data-driven, not hardcoded)
- [ ] Implement Phase 0.25 deliverables

## Activity Log
### 07:10 - Session Start
Session initialized with goal: mothership
Working on branch: patina
Tagged as: session-20260102-071003-start

### 07:10-12:45 - Phase 0.25 Design & Implementation

**Key Insights:**
1. **Relationship-Weighted Context** - Not all project connections equal. Sessions reveal relationship type (framework vs test-subject) via query patterns. Captured in spec for Phase 2+.

2. **MCP vs Skills** - Intelligence lives in Patina (MCP), not Skills. User asks questions, Patina does smart work. Skills are escape hatch for users without Patina.

3. **Intent-Aware Retrieval** - Detect query intent (Temporal/Rationale/Mechanism/Definition) and weight oracles accordingly.

**Implemented:**
- `src/retrieval/intent.rs` - QueryIntent, IntentWeights, detect_intent()
- `src/retrieval/fusion.rs` - rrf_fuse_weighted()
- `src/retrieval/engine.rs` - Intent detection in query pipeline
- `eval/temporal-queryset.json` - 10 session-derived queries
- Updated spec-mothership.md with Phase 0.25, MCP architecture, relationship insight

**Benchmark Results:**
- Baseline MRR: 0.179
- With intent weights: 0.104 (regressed)
- Temporal queries improved but Mechanism/Definition hurt
- Root cause: boosting semantic hurts when results come from lexical

**Next:** Try temporal-only boosting, add sessions_fts table


## Session Classification
- Work Type: exploration
- Files Changed:        0
- Commits:        0
- Patterns Modified:        0
- Session Tags: session-20260102-071003-start..session-20260102-071003-end
