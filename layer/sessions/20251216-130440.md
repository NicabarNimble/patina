# Session: TemporalOracle and Patina First Run Challenges
**ID**: 20251216-130440
**Started**: 2025-12-16T18:04:40Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20251216-130440-start
**Starting Commit**: a5c2f3fd766152469108dad8816786af87482963

## Previous Session Context
Last session (Live testing on dojo repo) tested patina init on a fresh dojo clone - init/scrape worked correctly. Key discoveries: MCP tools weren't being used effectively by Claude (no CLAUDE.md guidance), so tools were renamed for clarity (patina_query → scry, patina_context → context) with directive descriptions. Critical finding: TemporalOracle is missing from QueryEngine - the 75K co-change relationships scraped from git history are not queryable via MCP. Session ended with completed phase archival and reset to Phase 1. Carryover: Add TemporalOracle to QueryEngine (Phase 1b), evaluate auto-oxidize timing (Phase 1c), test MCP changes on fresh repo, create PR for patina branch commits.

## Goals
- [ ] TemporalOracle and Patina First Run Challenges

## Activity Log
### 13:04 - Session Start
Session initialized with goal: TemporalOracle and Patina First Run Challenges
Working on branch: patina
Tagged as: session-20251216-130440-start


### 14:18 - Update (covering since 13:04)

**Git Activity:**
- Commits this session: 8
- Last commit: docs(build): add Phase 2 Model Management spec

**Work Completed:**
1. **TemporalOracle** (`9a696db0`) - Created oracle that queries co_changes table, wired into QueryEngine for RRF fusion
2. **CLI --hybrid flag** (`49cf30c4`) - Exposed QueryEngine to CLI/HTTP API, bridging gap between direct oracle calls and fused results
3. **Auto-oxidize on init** (`48bececb`) - Init now runs oxidize after scrape for complete first-run experience
4. **Fix: oxidize.yaml creation** (`44a2284f`) - Init was calling oxidize but recipe file didn't exist
5. **Phase 2 Model Management spec** (`d7cfc7e1`) - Designed mothership-owned model architecture

**Key Decisions:**
- CLI vs MCP gap was intentional (direct control vs hybrid) - made discoverable via `--hybrid`
- Auto-oxidize: chose Option A (run on init) for best first-run UX despite ~30s overhead
- Model management: mothership owns hardware-specific models, projects reference them (mirrors frontends pattern)

**First Run Challenges Found & Fixed:**
- oxidize.yaml missing → init now creates default recipe
- Model architecture fragile (3 files must sync) → Phase 2 will eliminate duplication

**Patterns Observed:**
- "First run should just work" - multiple gaps found only via live testing on fresh dojo clone
- Single source of truth principle: config.toml should be authoritative, everything else derives
- Frontends pattern reusable: approved list at user level, selection at project level


### 14:21 - Session End

**Work Completed:** Session wrap-up, no new commits since last update.

**Session Summary:**
- Phase 1 complete (all exit criteria met)
- Phase 2 Model Management spec written and committed
- 8 commits total this session


## Session Classification
- Work Type: pattern-work
- Files Changed:       11
- Commits:        8
- Patterns Modified:        2
- Session Tags: session-20251216-130440-start..session-20251216-130440-end
