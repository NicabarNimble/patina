---
type: session
id: 20260203-134222
title: what is mother and what will mother be
status: archived
llm: claude
created: 2026-02-03T18:42:22Z
start_timestamp: 1770144142921
git:
  branch: patina
  starting_commit: 145b396ba984ef0ee3424633d790c5fb729ea169
  start_tag: session-20260203-134222-claude-start
---

## Previous Session Context
Decomposed the monolithic mother-delivery spec (637 lines) into focused sub-specs (D0-D5), grounded each against the actual codebase (8 fixes), and discovered that CLI and MCP scry run entirely different search pipelines — CLI bypasses oracles while MCP uses QueryEngine. Created D0 (unified search) sub-spec to make QueryEngine the default CLI path, ran an advisory board review that deferred D2 (recall directives), and captured belief [[mcp-is-shim-cli-is-product]] establishing CLI as the real product with MCP as a thin discovery shim.

## Goals
- [x] Understand what Mother is today vs what specs say it will be
- [x] Ground-truth all mother-delivery specs (D0-D5) against actual codebase
- [x] Security audit of Patina CLI (Litchfield/Davidoff style)
- [x] Create [[security-hardening]] spec with phased fix plan
- [x] Wire spec into [[build.md]] and versioning system

## Activity Log
### 13:42 - Session Start
Session initialized with goal: what is mother and what will mother be
Working on branch: patina
Tagged as: session-20260203-134222-claude-start

### 14:00 - Mother State of the Union
Deep exploration of Mother in code (1,846 lines Rust) vs specs (2,121 lines across 9 docs). Mother today: SQLite graph with 19 repos, weighted edges, learning algorithm, HTTP daemon, smart routing (100% vs 0% repo recall). Gap: beliefs don't reach the LLM at decision time — delivery problem, not data problem.

User pushed back on spec-to-code ratio criticism: specs are the rails that keep stateless sessions on track. Ref repo learning (OpenClaw, Gastown) is intentional, not overhead.

### 14:15 - Spec Ground-Truth Corrections
Verified all specs against codebase. Found 5 inaccuracies:
- [[d2-three-layer-delivery]]: tool descriptions already have recall language (Layer 1 partially shipped)
- [[d2-three-layer-delivery]]: `get_project_context()` queries SQLite too, not disk-only
- [[d3-two-step-retrieval]]: CLI already truncates to 200 chars, MCP is the real problem
- [[mother]] SPEC: storage diagram mixed implemented vs aspirational (Phase 3+)
- [[mother-naming]]: already complete, marked status → `complete`

Also marked D5 complete in [[mother-delivery]] parent spec and implementation order.
Committed as [[b1ef401f]].

### 14:30 - Security Audit (Litchfield/Davidoff Style)
Full security review of Patina CLI attack surface:
- **HTTP daemon** (`patina serve`): zero auth, no request limits, no CORS, no timeout — P0 critical
- **Secrets**: vault files world-readable (0o644), SSH secrets in argv, no input masking
- **ONNX model**: loaded without integrity verification — known attack vector
- **Clean**: SQL injection (parameterized), command injection (no shell=true), age encryption (X25519)

### 14:45 - Security Hardening Spec
Created [[security-hardening]] spec (`layer/surface/build/refactor/security-hardening/SPEC.md`):
- 14 findings across 3 priority phases (P0/P1/P2)
- P0: 6 fixes in 1 file (`serve/internal.rs`) — bearer token, body limit, limit cap, timeout, CORS, bind warning
- P1: file permissions (0o600), SSH stdin pipe, ONNX SHA-256 checksum
- P2: rpassword, zeroize, export-key to file, registry path validation
- Code sketches, verification curls, exit criteria per phase
Committed as [[b1ef401f]].

### 15:00 - Wiring and Versioning
- Wired [[security-hardening]] into [[build.md]] Active Refactors
- Fixed build.md Current Focus: D0-D5 (was D1-D5), D5 marked complete
- Added versioning section: single patch release (0.10.1) when all phases done
- Drafted next-session prompt: `implement P0 security hardening for patina serve. anchor in layer/core values. read code before write code. git update with scalpel vs shotgun`
Committed as [[9e360926]] and [[bdf20b7f]].


## Beliefs Captured: 0
_No beliefs captured this session_

## Session Classification
- Work Type: pattern-work
- Files Changed: 8
- Commits: 3
- Patterns Modified: 7
- Beliefs Captured: 0
- Session Tags: session-20260203-134222-claude-start..session-20260203-134222-claude-end

## User Prompts (23)

1. `curious if claude code has built in memory now? do you have memory?`
2. `ok seems you had some memory last few sessions ... so lets move on .... wtf is mother and what wi...`
3. `ok .. first off youre writting all this spec .. second we are trying to learn from openclaw and g...`
4. `great now .. hold that context and let me know if our spec is correct or if we need to edit`
5. `yes make the edits`
6. `/context `
7. `do a run through patina (use --help to orient) give me a sergey davidoff + david litchfield revie...`
8. `read git history to see how to build a fix/patch spec and make a quick security fix patch spec`
9. `commit this`
10. `is our spec all wired up to go for a new session?`
11. `great draft a prompt for next session to use. anchor in layer/core values. read code before write...`
12. `build a better starting prompt look through some history if you can`
13. `meh i perfer this verbage anchor in layer/core values. read code
  before write code. git update ...`
14. `god its getting worse .. did i break something`
15. `red our spec that i want to do nex tell me about it`
16. `what is the spec called?`
17. `thats the fullname?`
18. `hmm it doesnt have spec in the name?`
19. `ahhh thats what i was thinking .. how will our version system handle after we finish`
20. `version`
21. `maybe that should be in the spec?`
22. `yikes no its all one version`
23. `commit and /session-end`
