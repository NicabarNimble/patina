# Session: boost
**ID**: 20251221-083014
**Started**: 2025-12-21T13:30:14Z
**LLM**: claude
**Git Branch**: patina
**Session Tag**: session-20251221-083014-start
**Starting Commit**: 29a05ba8e93ce9a4d8611181be8566f47fe67274

## Previous Session Context
Last session (phase 1.5 and phase 2 Begin) implemented all Phase 1.5 signals (commit_count, contributor_count, is_entry_point, is_test_file, directory_depth, file_size_rank) and Phase 2 structural boost layer (~140 lines in engine.rs). Key finding: structural boost testing with factors 0.1-0.5 showed no MRR improvement - structural signals are orthogonal to semantic relevance (activity/centrality don't correlate with "where is X" queries). Implementation works correctly but hypothesis that structural signals would boost retrieval for this query set was disproven. Open item: signals may help "what's important" queries rather than "find X" queries.

## Goals
- [x] boost review - review and assess the structural boost implementation
- [x] Remove boost layer and StructuralOracle (experiment concluded)
- [x] Update documentation to reflect learnings
- [x] Define next direction (Observable Scry)

## Activity Log
### 08:30 - Session Start
Session initialized with goal: boost review
Working on branch: patina
Tagged as: session-20251221-083014-start

### 08:30-09:30 - Boost Review & Analysis
- Anchored in layer/core values (dependable-rust, unix-philosophy)
- Reviewed build.md, spec-robust-signals.md, recent sessions
- Read boost implementation in engine.rs (~120 lines)
- Discussed with user: structural signals are priors (P(doc)), not relevance (P(doc|query))

**Key insight:** Multiplying priors into relevance queries only helps when relevance is uncertain. For "where is X?" queries, semantic match is clear — priors add noise.

### 09:30-10:00 - Code Removal
- Removed boost layer from engine.rs (~120 lines)
- Removed StructuralOracle from structural.rs (~170 lines, file deleted)
- Updated oracles/mod.rs exports
- Build passes, all 174 tests pass

### 10:00-10:30 - Documentation Updates
- Updated spec-robust-signals.md (status complete, results, lessons)
- Updated spec-work-deferred.md (new "Experiments" section with full post-mortem)
- Updated build.md (archived Phase 1/1.5/2, added current direction)

### 10:30-11:00 - New Direction: Observable Scry
- Created spec-observable-scry.md with three phases:
  1. Structured Response (concise default, --explain for full)
  2. Explicit Modes (find, orient, recent, why)
  3. Feedback Logging (automatic usage capture)
- Refined spec with external LLM feedback (two-tiered output, stable JSON schema, automatic capture > manual feedback)
- Anchored in layer/core values

### 11:00 - Git Commits (5 surgical commits)
1. feat(assay): add Phase 1.5 robust signals to derive
2. refactor(retrieval): remove structural boost layer and StructuralOracle
3. docs(signals): update specs with Phase 2 experiment results
4. docs(build): archive signal phases, add observable scry spec
5. docs(sessions): add Dec 20 session logs

## Key Decisions
1. **Boost removed** — structural priors don't improve relevance queries
2. **StructuralOracle removed** — doc_id mismatch (file vs symbol level) + wrong use case
3. **Signals preserved** — available via `patina assay derive` for direct queries
4. **Observable Scry** — next direction: make scry explainable, steerable, instrumented
5. **Future rebuild** — StructuralOracle returns when query-type routing exists

## Patterns Observed
- **Priors ≠ Relevance** — structural signals help "what's important?" not "where is X?"
- **Data quality > model complexity** — need observable output before optimizing
- **Simple steering > smart routing** — explicit modes before classifier

## Commits This Session
- 5681f6a6 feat(assay): add Phase 1.5 robust signals to derive
- 7f1b3398 refactor(retrieval): remove structural boost layer and StructuralOracle
- 5c88d3eb docs(signals): update specs with Phase 2 experiment results
- 277debc4 docs(build): archive signal phases, add observable scry spec
- 8587ab68 docs(sessions): add Dec 20 session logs


## Session Classification
- Work Type: pattern-work
- Files Changed:       11
- Commits:        7
- Patterns Modified:        6
- Session Tags: session-20251221-083014-start..session-20251221-083014-end
